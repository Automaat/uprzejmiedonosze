FROM node:20-alpine

# Install firebase-tools globally
RUN npm install -g firebase-tools

# Create working directory
WORKDIR /firebase

# Copy firebase configuration
COPY src/firebase.json /firebase/firebase.json

# Expose Auth emulator and UI ports
EXPOSE 9099 4000

# Bind emulator to all interfaces for Docker accessibility
ENV FIREBASE_EMULATOR_HUB_HOST=0.0.0.0

# Start only Auth emulator
CMD ["firebase", "emulators:start", "--only", "auth", "--project", "demo-project"]
